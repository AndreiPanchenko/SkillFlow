<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="${student.id != null} ? 'Редактирование студента - SkillFlow' : 'Добавление студента - SkillFlow'">SkillFlow</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark navbar-purple">
  <div class="container">
    <a class="navbar-brand" href="/">
      <i class="fas fa-graduation-cap me-2"></i>SkillFlow
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/experts">
            <i class="fas fa-users me-1"></i>Эксперты
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/students">
            <i class="fas fa-user-graduate me-1"></i>Студенты
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/courses">
            <i class="fas fa-book me-1"></i>Курсы
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <!-- Заголовок -->
      <div class="d-flex align-items-center mb-4">
        <div class="me-3">
          <i class="fas fa-user-graduate fa-2x gradient-text"></i>
        </div>
        <div>
          <h1 class="mb-1" th:text="${student.id != null} ? 'Редактирование студента' : 'Добавление студента'"></h1>
          <p class="text-muted mb-0" th:text="${student.id != null} ?
                            'Обновление информации о студенте' :
                            'Заполните информацию о новом студенте'"></p>
        </div>
      </div>

      <!-- Форма -->
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-user-edit me-2"></i>
            <span th:text="${student.id != null} ? 'Редактировать данные' : 'Основная информация'"></span>
          </h5>
        </div>
        <div class="card-body">
          <form th:action="@{/students}" th:object="${student}" method="post" class="needs-validation" novalidate>
            <!-- Основная информация -->
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="firstName" class="form-label">
                  <i class="fas fa-user me-1 text-purple"></i>Имя
                </label>
                <input type="text" class="form-control" id="firstName" th:field="*{firstName}"
                       placeholder="Введите имя" required>
                <div class="invalid-feedback">
                  Пожалуйста, введите имя студента.
                </div>
                <div th:if="${#fields.hasErrors('firstName')}" class="text-danger mt-1">
                  <small th:errors="*{firstName}"></small>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="lastName" class="form-label">
                  <i class="fas fa-user me-1 text-purple"></i>Фамилия
                </label>
                <input type="text" class="form-control" id="lastName" th:field="*{lastName}"
                       placeholder="Введите фамилию" required>
                <div class="invalid-feedback">
                  Пожалуйста, введите фамилию студента.
                </div>
                <div th:if="${#fields.hasErrors('lastName')}" class="text-danger mt-1">
                  <small th:errors="*{lastName}"></small>
                </div>
              </div>
            </div>

            <!-- Контактная информация -->
            <div class="mb-3">
              <label for="email" class="form-label">
                <i class="fas fa-envelope me-1 text-purple"></i>Email адрес
              </label>
              <input type="email" class="form-control" id="email" th:field="*{email}"
                     placeholder="student@example.com" required>
              <div class="invalid-feedback">
                Пожалуйста, введите корректный email адрес.
              </div>
              <div th:if="${#fields.hasErrors('email')}" class="text-danger mt-1">
                <small th:errors="*{email}"></small>
              </div>
            </div>

            <!-- Дополнительная информация -->
            <div class="mb-4" th:if="${student.id != null}">
              <label class="form-label">
                <i class="fas fa-info-circle me-1 text-purple"></i>Дополнительная информация
              </label>
              <div class="card bg-light">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-6">
                      <small class="text-muted">Дата регистрации:</small>
                      <p class="mb-0 fw-bold" th:text="${#temporals.format(student.registrationDate, 'dd.MM.yyyy HH:mm')}"></p>
                    </div>
                    <div class="col-md-6">
                      <small class="text-muted">ID студента:</small>
                      <p class="mb-0 fw-bold text-purple" th:text="${student.id}"></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Кнопки -->
            <div class="d-flex gap-2">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save me-2"></i>
                <span th:text="${student.id != null} ? 'Обновить данные' : 'Создать студента'"></span>
              </button>
              <a th:href="@{/students}" class="btn btn-secondary">
                <i class="fas fa-arrow-left me-2"></i>Назад к списку
              </a>
              <div class="ms-auto">
                <button type="reset" class="btn btn-outline-secondary">
                  <i class="fas fa-undo me-2"></i>Очистить
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Подсказки -->
      <div class="card mt-4 bg-purple-light">
        <div class="card-body">
          <h6 class="card-title text-purple">
            <i class="fas fa-lightbulb me-2"></i>Рекомендации по заполнению
          </h6>
          <ul class="list-unstyled mb-0">
            <li><small class="text-muted"><i class="fas fa-check-circle me-2 text-success"></i>Указывайте актуальную контактную информацию</small></li>
            <li><small class="text-muted"><i class="fas fa-check-circle me-2 text-success"></i>Используйте реальные имена для удобства коммуникации</small></li>
            <li><small class="text-muted"><i class="fas fa-check-circle me-2 text-success"></i>Убедитесь, что email корректен для отправки уведомлений</small></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Футер -->
<footer class="mt-5">
  <div class="container text-center">
    <p class="mb-0">&copy; 2024 SkillFlow. Все права защищены.</p>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Валидация формы
  (function () {
      'use strict'
      var forms = document.querySelectorAll('.needs-validation')
      Array.prototype.slice.call(forms)
          .forEach(function (form) {
              form.addEventListener('submit', function (event) {
                  if (!form.checkValidity()) {
                      event.preventDefault()
                      event.stopPropagation()
                  }
                  form.classList.add('was-validated')
              }, false)
          })
  })()
</script>
</body>
</html>